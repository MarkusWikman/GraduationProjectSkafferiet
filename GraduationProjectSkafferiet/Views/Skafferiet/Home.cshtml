@model HomeVM

@{
    ViewData["Title"] = "Home";
}
<h1 class="navbar-brand">Skafferiet</h1>

<form id="inventory" asp-controller="Skafferiet" asp-action="Home">
    <label for="ingredients">Add ingredient:</label>

    <select asp-for="AddIngredient" asp-items="Model.IngredientsList"></select>
</form>

<button form="inventory" class="btn btn-primary" id="addIngredientButton" onclick="document.getElementById('addIngredientButton').disabled = true ;document.getElementById('inventory').submit(); ">Add Ingredient</button>
<button type="submit" form="getRecipes" class="btn btn-success" @(!Model.IsIngredientChosen ? "disabled" : "")>Get recipes</button>

@if (Model.IsIngredientChosen)
{
    <div id="inventoryDiv">

        <form id="getRecipes" asp-action="Recipes" asp-controller="Skafferiet">
            <ul class="list-unstyled">
                @foreach (var item in Model.Inventory)
                {
                    <li>
                        <div class="d-flex">
                            <a class="btn-close" asp-action="Delete" asp-controller="Skafferiet" asp-route-ingredientName="@item.Value" onclick="clickAndDisable(this)"></a>
                            <div class="d-inline-block align-middle">
                                <div class="d-inline-block align-middle checkboxes">
                                    <label for="@item.Value">@item.Value</label>
                                    <input type="checkbox" name="@nameof(HomeVM.SelectedIngredients)" value="@item.Value" id="@item.Value" checked="" />
                                </div>
                            </div>
                        </div>
                    </li>
                }
            </ul>
        </form>
    </div>
    </div>
}
else
{
    <div>
        <p>Your pantry is empty!</p>
    </div>
}
<script>
    function clickAndDisable(link) {
        // disable subsequent clicks
        link.onclick = function (event) {
            event.preventDefault();
        }
    }
</script>


